---
layout: post
title: 操作系统——处理机调度与死锁
date: 2018-06-24
categories: blog
tags: 操作系统
description: 学习笔记。
---

第三章 处理机调度与死锁
===
## 前言

`操作系统原理`是武汉大学计算机学院软件工程专业大二下半学期所学习的一门专业课，教材为西安电子科技大学出版社的`计算机操作系统`第4版，这个专题的博客为该课程的学习笔记

---
### 处理机调度的层次

1.高级调度（作业调度、长程调度、宏观调度）（周期长，频率低）

按照系统预定的调度策略决定把后备队列作业中的哪些作业调入主存，为它们创建进程并启动它们运行。在作业完成后，进行必要的善后处理。

高级调度主要用于多道批处理系统中，在分时系统和实时系统中不设置高级调度。

2.低级调度（进程调度、短程调度、微观调度）（频率最高）

按照某种策略从就绪队列中选择一个进程，把处理机分配给它。

3.中级调度（内存调度、对换调度、中程调度）

内存中暂时不运行或不能运行的进程被换出至外存，这时这个进程处于挂起状态，当进程具备了运行条件，且主存又有空闲区域时，再由中级调度决定把一部分这样的进程重新调回主存工作。

所有的系统都必须配备低级调度。

并非所有的系统都需要作业调度、中程调度。

批处理系统中，作业从提交到完成要经历四个状态：提交状态、后备状态、执行状态、完成状态。

**作业调度**的主要任务是按一定的原则从外存上处于后备状态的作业中选择一个或多个作业进入内存，并为作业做好运行前的准备工作。作业完成后进行善后工作。

作业调度需要决定：
- 接纳多少作业：取决于多道程序度
- 接纳哪些作业：取决于调度算法
- 作业调度的运行频率较低，通常为几分钟一次。

**进程调度**的主要任务是协调进程对CPU的竞争，即按照某种策略（调度算法）从就绪队列中选取一个进程，将处理机分配给它。

进程调度是操作系统最为核心的部分，进程调度策略的优劣直接影响到整个系统的性能。

进程调度的运行频率很高，一般几十毫秒要运行一次。 

进程调度的方式：非抢占方式和抢占方式
- 非抢占方式：又称非剥夺方式、不可剥夺方式、不可抢占方式。这种调度方式是指一旦将处理机分配给某进程后，便让该进程一直执行，直到该进程完成或发生某事件而进入阻塞状态，才把处理机分配给其他进程。
  - 特点：简单，系统开销小，但无法处理紧急任务。
- 抢占方式：又称剥夺方式、可剥夺方式。这种调度方式是指允许调度程序根据某种原则去停止正在执行的进程，将已分配给该进程的处理机重新分配给其他进程。
  - 抢占原则有：优先权、短作业优先、时间片等。
  - 特点：系统响应性高，但增加系统开销 
  
3.1.4中级调度
引入中级调度的目的是提高内存利用率和系统吞吐量。
中级调度的运行频率介于进程调度和作业调度两者之间。
引起中级调度的原因：
换出：
内存空间紧张，频繁缺页时，应换出内存的部分进程。
就绪队列中进程太多影响响应时间，应换出就绪队列中的部分进程。
等待I/O可能要一段时间，可以将这类进程换出。
为便于紧缩，可以将部分进程换出。
换入：
内存有足够空间时，可以从外存换入一些进程。
外存中进程的优先级高于内存中进程时，可以换入。

